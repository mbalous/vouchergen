---
import Layout from '../layouts/Layout.astro';
import { setupVoucherPreview } from '../scripts/voucher-preview';
---

<Layout title="Voucher Generator">
	<main class="w-full max-w-6xl bg-white rounded-lg shadow-xl p-8">
		<h1 class="text-3xl font-bold mb-8 text-center text-gray-800">Gift Voucher Generator</h1>
		
		<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
			<!-- Controls -->
			<div class="space-y-4 lg:col-span-1">
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
					<input 
						type="text"
						id="input-title"
						class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
						value="Gift Voucher"
					/>
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Subtitle</label>
					<input 
						type="text"
						id="input-subtitle"
						class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
						value="A special treat just for you"
					/>
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
					<textarea 
						id="input-address"
						class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
						rows="3"
					>123 Main St,&#10;Cityville, ST 12345</textarea>
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Valid Till</label>
					<input 
						type="text"
						id="input-valid-till"
						class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
						value="December 31, 2025"
					/>
				</div>
				
				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Background Image</label>
					<input 
						type="file" 
						id="bg-upload" 
						accept="image/*"
						class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
					/>
				</div>

				<div>
					<label class="block text-sm font-medium text-gray-700 mb-1">Background Blur</label>
					<input 
						type="range" 
						id="input-blur" 
						min="0" 
						max="20" 
						value="0"
						class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
					/>
				</div>

			<div class="pt-4 space-y-2">
				<button 
					id="regenerate-code-btn"
					class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-md transition duration-200 flex items-center justify-center gap-2">
				üîÑ
					Regenerate Code
				</button>
					<button 
						id="download-btn"
						class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-200 flex items-center justify-center gap-2">
					‚¨áÔ∏è
						Download Voucher
					</button>
				</div>
			</div>

			<!-- Preview -->
			<div class="lg:col-span-2 flex flex-col gap-4">
				<div class="flex items-center justify-center bg-gray-50 p-4 rounded-lg border border-gray-200">
					<div id="voucher-preview" class="relative w-full aspect-video rounded-lg overflow-hidden bg-gray-300 shadow-xl flex items-center justify-center">
						<p class="text-gray-500">Loading Preview...</p>
					</div>
				</div>
				<p class="text-sm text-gray-500 text-center italic">Preview may differ slightly from downloaded image.</p>
			</div>
		</div>
	</main>

	<script>
		import { setupVoucherPreview } from '../scripts/voucher-preview';
		setupVoucherPreview();
	</script>
</Layout>
